'use strict';function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function buildGameLinks(a){var b='';return a.forEach(function(a){b+='<a data-url="'+a.url+'" class="matchLink" href="#">'+a.title+'</a>'}),b}function initMatchClicks(a){[].concat(_toConsumableArray(document.querySelectorAll('.matchLink'))).forEach(function(b){b.addEventListener('click',function(b){console.log(b.target.dataset.url),a(b.target.textContent,b.target.dataset.url)})})}function startScan(a){console.log(a)}function showSeats(a){var b='<h4></h4>';return 0==a.length&&(b+='<p>blocks.length == 0</p>'),a.forEach(function(a){b+='<p>\n    <a data-url="" class="matchLink" href="'+a.link+'">'+a.name+'</a>\n    Freie Sitze '+a.freeSeats+' Price: '+a.price+' \u20AC\n    </p>'}),b}function addSound(){return'<iframe width="560" height="315" src="https://www.youtube.com/embed/MFlW0IdWwE0?autoplay=1" frameborder="0" allowfullscreen autoplay="1"></iframe>'}function addLoader(){return'<div class="loading"></div>'}function removeLoader(){document.querySelector('.loader')}
'use strict';var searchPrice,blockResponse=[],searchFound=!1,requestUrl='/matches',head=document.querySelector('.head'),body=document.querySelector('.body'),sound=document.querySelector('.sound');showUpcommingMatches();function showUpcommingMatches(){body.innerHTML='Get upcomming matches',fetch(requestUrl,{credentials:'include'}).then(function(a){return a.json()}).then(function(a){body.innerHTML=buildGameLinks(a),initMatchClicks(scanMatch)}).catch(function(a){console.log(a)})}function scanMatch(a,b){head.innerHTML=a,body.innerHTML=Number.isInteger(searchPrice)?'Looking for '+searchPrice+'\u20AC <small><a href="#" onclick="addAlert()">change</a></small><br>'+addLoader():'<a href="#" onclick="addAlert()">Add Alert!</a>'+addLoader();var c={method:'POST',credentials:'include',headers:{Accept:'application/json',"Content-Type":'application/json'},body:JSON.stringify({url:b})};fetch(requestUrl,c).then(function(a){return a.json()}).then(function(c){blockResponse=c,body.innerHTML+=showSeats(c),document.querySelector('.loading').remove(),checkPrice(),delayedScanMatch(a,b)}).catch(function(c){console.log(c),delayedScanMatch(a,b)})}function addAlert(){searchPrice=parseInt(prompt('Price to look for')),Number.isInteger(searchPrice)?checkPrice():alert('Not Valid')}function checkPrice(){searchFound?!foundPrice()&&(searchFound=!1,sound.innerHTML=''):foundPrice()&&(sound.innerHTML+=addSound())}function foundPrice(){return Number.isInteger(searchPrice)&&1<=blockResponse.length&&blockResponse[0].price<=searchPrice&&(searchFound=!0,!0)}function delayedScanMatch(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:8e3;window.setTimeout(function(){scanMatch(a,b)},c)}
